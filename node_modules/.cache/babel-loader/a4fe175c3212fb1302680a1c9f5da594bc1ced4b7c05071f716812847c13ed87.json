{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SVGmaction = void 0;\nvar Wrapper_js_1 = require(\"../Wrapper.js\");\nvar maction_js_1 = require(\"../../common/Wrappers/maction.js\");\nvar maction_js_2 = require(\"../../common/Wrappers/maction.js\");\nvar maction_js_3 = require(\"../../../core/MmlTree/MmlNodes/maction.js\");\nvar SVGmaction = function (_super) {\n  __extends(SVGmaction, _super);\n  function SVGmaction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SVGmaction.prototype.toSVG = function (parent) {\n    var svg = this.standardSVGnode(parent);\n    var child = this.selected;\n    var _a = child.getOuterBBox(),\n      h = _a.h,\n      d = _a.d,\n      w = _a.w;\n    this.adaptor.append(this.element, this.svg('rect', {\n      width: this.fixed(w),\n      height: this.fixed(h + d),\n      y: this.fixed(-d),\n      fill: 'none',\n      'pointer-events': 'all'\n    }));\n    child.toSVG(svg);\n    var bbox = child.getOuterBBox();\n    if (child.element) {\n      child.place(bbox.L * bbox.rscale, 0);\n    }\n    this.action(this, this.data);\n  };\n  SVGmaction.prototype.setEventHandler = function (type, handler) {\n    this.element.addEventListener(type, handler);\n  };\n  SVGmaction.kind = maction_js_3.MmlMaction.prototype.kind;\n  SVGmaction.styles = {\n    '[jax=\"SVG\"] mjx-tool': {\n      display: 'inline-block',\n      position: 'relative',\n      width: 0,\n      height: 0\n    },\n    '[jax=\"SVG\"] mjx-tool > mjx-tip': {\n      position: 'absolute',\n      top: 0,\n      left: 0\n    },\n    'mjx-tool > mjx-tip': {\n      display: 'inline-block',\n      padding: '.2em',\n      border: '1px solid #888',\n      'font-size': '70%',\n      'background-color': '#F8F8F8',\n      color: 'black',\n      'box-shadow': '2px 2px 5px #AAAAAA'\n    },\n    'g[data-mml-node=\"maction\"][data-toggle]': {\n      cursor: 'pointer'\n    },\n    'mjx-status': {\n      display: 'block',\n      position: 'fixed',\n      left: '1em',\n      bottom: '1em',\n      'min-width': '25%',\n      padding: '.2em .4em',\n      border: '1px solid #888',\n      'font-size': '90%',\n      'background-color': '#F8F8F8',\n      color: 'black'\n    }\n  };\n  SVGmaction.actions = new Map([['toggle', [function (node, _data) {\n    node.adaptor.setAttribute(node.element, 'data-toggle', node.node.attributes.get('selection'));\n    var math = node.factory.jax.math;\n    var document = node.factory.jax.document;\n    var mml = node.node;\n    node.setEventHandler('click', function (event) {\n      if (!math.end.node) {\n        math.start.node = math.end.node = math.typesetRoot;\n        math.start.n = math.end.n = 0;\n      }\n      mml.nextToggleSelection();\n      math.rerender(document);\n      event.stopPropagation();\n    });\n  }, {}]], ['tooltip', [function (node, data) {\n    var tip = node.childNodes[1];\n    if (!tip) return;\n    var rect = node.firstChild();\n    if (tip.node.isKind('mtext')) {\n      var text = tip.node.getText();\n      node.adaptor.insert(node.svg('title', {}, [node.text(text)]), rect);\n    } else {\n      var adaptor_1 = node.adaptor;\n      var container_1 = node.jax.container;\n      var math = node.node.factory.create('math', {}, [node.childNodes[1].node]);\n      var tool_1 = node.html('mjx-tool', {}, [node.html('mjx-tip')]);\n      var hidden_1 = adaptor_1.append(rect, node.svg('foreignObject', {\n        style: {\n          display: 'none'\n        }\n      }, [tool_1]));\n      node.jax.processMath(math, adaptor_1.firstChild(tool_1));\n      node.childNodes[1].node.parent = node.node;\n      node.setEventHandler('mouseover', function (event) {\n        data.stopTimers(node, data);\n        data.hoverTimer.set(node, setTimeout(function () {\n          adaptor_1.setStyle(tool_1, 'left', '0');\n          adaptor_1.setStyle(tool_1, 'top', '0');\n          adaptor_1.append(container_1, tool_1);\n          var tbox = adaptor_1.nodeBBox(tool_1);\n          var nbox = adaptor_1.nodeBBox(node.element);\n          var dx = (nbox.right - tbox.left) / node.metrics.em + node.dx;\n          var dy = (nbox.bottom - tbox.bottom) / node.metrics.em + node.dy;\n          adaptor_1.setStyle(tool_1, 'left', node.px(dx));\n          adaptor_1.setStyle(tool_1, 'top', node.px(dy));\n        }, data.postDelay));\n        event.stopPropagation();\n      });\n      node.setEventHandler('mouseout', function (event) {\n        data.stopTimers(node, data);\n        var timer = setTimeout(function () {\n          return adaptor_1.append(hidden_1, tool_1);\n        }, data.clearDelay);\n        data.clearTimer.set(node, timer);\n        event.stopPropagation();\n      });\n    }\n  }, maction_js_2.TooltipData]], ['statusline', [function (node, data) {\n    var tip = node.childNodes[1];\n    if (!tip) return;\n    if (tip.node.isKind('mtext')) {\n      var adaptor_2 = node.adaptor;\n      var text_1 = tip.node.getText();\n      adaptor_2.setAttribute(node.element, 'data-statusline', text_1);\n      node.setEventHandler('mouseover', function (event) {\n        if (data.status === null) {\n          var body = adaptor_2.body(adaptor_2.document);\n          data.status = adaptor_2.append(body, node.html('mjx-status', {}, [node.text(text_1)]));\n        }\n        event.stopPropagation();\n      });\n      node.setEventHandler('mouseout', function (event) {\n        if (data.status) {\n          adaptor_2.remove(data.status);\n          data.status = null;\n        }\n        event.stopPropagation();\n      });\n    }\n  }, {\n    status: null\n  }]]]);\n  return SVGmaction;\n}((0, maction_js_1.CommonMactionMixin)(Wrapper_js_1.SVGWrapper));\nexports.SVGmaction = SVGmaction;","map":{"version":3,"mappings":"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","names":["__extends","SVGmaction","parent","svg","standardSVGnode","child","selected","getOuterBBox","h","d","w","adaptor","append","element","width","fixed","height","y","fill","toSVG","bbox","place","L","rscale","action","data","type","handler","addEventListener","maction_js_3","prototype","kind","display","position","top","left","padding","border","color","cursor","bottom","Map","node","_data","setAttribute","attributes","get","math","factory","jax","document","mml","setEventHandler","event","end","start","typesetRoot","n","nextToggleSelection","rerender","stopPropagation","tip","childNodes","rect","firstChild","isKind","text","getText","insert","adaptor_1","container_1","container","create","tool_1","html","hidden_1","style","processMath","stopTimers","hoverTimer","set","setTimeout","setStyle","tbox","nodeBBox","nbox","dx","right","metrics","em","dy","px","postDelay","timer","clearDelay","clearTimer","maction_js_2","adaptor_2","text_1","status","body","remove","Wrapper_js_1","exports"],"sources":["/Users/prashant/Desktop/react-quiz/node_modules/mathjax-full/ts/output/svg/Wrappers/maction.ts"],"sourcesContent":["/*************************************************************\n *\n *  Copyright (c) 2018-2022 The MathJax Consortium\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n/**\n * @fileoverview  Implements the SVGmaction wrapper for the MmlMaction object\n *\n * @author dpvc@mathjax.org (Davide Cervone)\n */\n\nimport {SVGWrapper, SVGConstructor} from '../Wrapper.js';\nimport {CommonMactionMixin} from '../../common/Wrappers/maction.js';\nimport {ActionDef} from '../../common/Wrappers/maction.js';\nimport {EventHandler, TooltipData} from '../../common/Wrappers/maction.js';\nimport {MmlMaction} from '../../../core/MmlTree/MmlNodes/maction.js';\nimport {TextNode, AbstractMmlNode} from '../../../core/MmlTree/MmlNode.js';\nimport {StyleList} from '../../../util/StyleList.js';\n\n/*****************************************************************/\n/**\n * The SVGmaction wrapper for the MmlMaction object\n *\n * @template N  The HTMLElement node class\n * @template T  The Text node class\n * @template D  The Document class\n */\n// @ts-ignore\nexport class SVGmaction<N, T, D> extends\nCommonMactionMixin<SVGWrapper<any, any, any>, SVGConstructor<any, any, any>>(SVGWrapper) {\n\n  /**\n   * The maction wrapper\n   */\n  public static kind = MmlMaction.prototype.kind;\n\n  /**\n   * @override\n   */\n  public static styles: StyleList = {\n    '[jax=\"SVG\"] mjx-tool': {\n      display: 'inline-block',\n      position: 'relative',\n      width: 0, height: 0\n    },\n    '[jax=\"SVG\"] mjx-tool > mjx-tip': {\n      position: 'absolute',\n      top: 0, left: 0\n    },\n    'mjx-tool > mjx-tip': {\n      display: 'inline-block',\n      padding: '.2em',\n      border: '1px solid #888',\n      'font-size': '70%',\n      'background-color': '#F8F8F8',\n      color: 'black',\n      'box-shadow': '2px 2px 5px #AAAAAA'\n    },\n    'g[data-mml-node=\"maction\"][data-toggle]': {\n      cursor: 'pointer'\n    },\n    'mjx-status': {\n      display: 'block',\n      position: 'fixed',\n      left: '1em',\n      bottom: '1em',\n      'min-width': '25%',\n      padding: '.2em .4em',\n      border: '1px solid #888',\n      'font-size': '90%',\n      'background-color': '#F8F8F8',\n      color: 'black'\n    }\n  };\n\n  /**\n   * The valid action types and their handlers\n   */\n  public static actions = new Map([\n    ['toggle', [(node, _data) => {\n      //\n      // Mark which child is selected\n      //\n      node.adaptor.setAttribute(node.element, 'data-toggle', node.node.attributes.get('selection') as string);\n      //\n      // Cache the data needed to select another node\n      //\n      const math = node.factory.jax.math;\n      const document = node.factory.jax.document;\n      const mml = node.node as MmlMaction;\n      //\n      // Add a click handler that changes the selection and rerenders the expression\n      //\n      node.setEventHandler('click', (event: Event) => {\n        if (!math.end.node) {\n          //\n          // If the MathItem was created by hand, it might not have a node\n          // telling it where to replace the existing math, so set it.\n          //\n          math.start.node = math.end.node = math.typesetRoot;\n          math.start.n = math.end.n = 0;\n        }\n        mml.nextToggleSelection();\n        math.rerender(document);\n        event.stopPropagation();\n      });\n    }, {}]],\n\n    ['tooltip', [(node, data) => {\n      const tip = node.childNodes[1];\n      if (!tip) return;\n      const rect = node.firstChild();\n      if (tip.node.isKind('mtext')) {\n        //\n        // Text tooltips are handled through title attributes\n        //\n        const text = (tip.node as TextNode).getText();\n        node.adaptor.insert(node.svg('title', {}, [node.text(text)]), rect);\n      } else {\n        //\n        // Math tooltips are handled through hidden nodes and event handlers\n        //\n        const adaptor = node.adaptor;\n        const container = node.jax.container;\n        const math = (node.node as AbstractMmlNode).factory.create('math', {}, [node.childNodes[1].node]);\n        const tool = node.html('mjx-tool', {}, [node.html('mjx-tip')]);\n        const hidden = adaptor.append(rect, node.svg('foreignObject', {style: {display: 'none'}}, [tool]));\n        node.jax.processMath(math, adaptor.firstChild(tool));\n        node.childNodes[1].node.parent = node.node;\n        //\n        // Set up the event handlers to display and remove the tooltip\n        //\n        node.setEventHandler('mouseover', (event: Event) => {\n          data.stopTimers(node, data);\n          data.hoverTimer.set(node, setTimeout(() => {\n            adaptor.setStyle(tool, 'left', '0');\n            adaptor.setStyle(tool, 'top', '0');\n            adaptor.append(container, tool);\n            const tbox = adaptor.nodeBBox(tool);\n            const nbox = adaptor.nodeBBox(node.element);\n            const dx = (nbox.right - tbox.left) / node.metrics.em + node.dx;\n            const dy = (nbox.bottom - tbox.bottom) / node.metrics.em + node.dy;\n            adaptor.setStyle(tool, 'left', node.px(dx));\n            adaptor.setStyle(tool, 'top', node.px(dy));\n          }, data.postDelay));\n          event.stopPropagation();\n        });\n        node.setEventHandler('mouseout',  (event: Event) => {\n          data.stopTimers(node, data);\n          const timer = setTimeout(() => adaptor.append(hidden, tool), data.clearDelay);\n          data.clearTimer.set(node, timer);\n          event.stopPropagation();\n        });\n      }\n    }, TooltipData]],\n\n    ['statusline', [(node, data) => {\n      const tip = node.childNodes[1];\n      if (!tip) return;\n      if (tip.node.isKind('mtext')) {\n        const adaptor = node.adaptor;\n        const text = (tip.node as TextNode).getText();\n        adaptor.setAttribute(node.element, 'data-statusline', text);\n        //\n        // Set up event handlers to change the status window\n        //\n        node.setEventHandler('mouseover', (event: Event) => {\n          if (data.status === null) {\n            const body = adaptor.body(adaptor.document);\n            data.status = adaptor.append(body, node.html('mjx-status', {}, [node.text(text)]));\n          }\n          event.stopPropagation();\n        });\n        node.setEventHandler('mouseout', (event: Event) => {\n          if (data.status) {\n            adaptor.remove(data.status);\n            data.status = null;\n          }\n          event.stopPropagation();\n        });\n      }\n    }, {\n      status: null  // cached status line\n    }]]\n\n  ] as ActionDef<SVGmaction<any, any, any>>[]);\n\n  /*************************************************************/\n\n  /**\n   * @override\n   */\n  public toSVG(parent: N) {\n    const svg = this.standardSVGnode(parent);\n    const child = this.selected;\n    const {h, d, w} = child.getOuterBBox();\n    this.adaptor.append(this.element, this.svg('rect', {\n      width: this.fixed(w), height: this.fixed(h + d), y: this.fixed(-d),\n      fill: 'none', 'pointer-events': 'all'\n    }));\n    child.toSVG(svg);\n    const bbox = child.getOuterBBox();\n    if (child.element) {\n      child.place(bbox.L * bbox.rscale, 0);\n    }\n    this.action(this, this.data);\n  }\n\n  /**\n   * Add an event handler to the output for this maction\n   */\n  public setEventHandler(type: string, handler: EventHandler) {\n    (this.element as any).addEventListener(type, handler);\n  }\n\n}\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}